{
  "openapi": "3.0.1",
  "info": {
    "title": "DAMS Collection API",
    "description": "An API for interactings with the DAMS",
    "contact": {
      "email": "booster@inuits.eu"
    },
    "version": "0.0.1"
  },
  "externalDocs": {
    "description": "Find out more about DAMS",
    "url": "https://docs.inuits.io/dams/collection-api"
  },
  "servers": [
    {
      "url": "/"
    }
  ],
  "tags": [
    {
      "name": "tenant",
      "description": "Tenants in DAMS"
    },
    {
      "name": "entity",
      "description": "Entities in DAMS"
    },
    {
      "name": "mediafile",
      "description": "Mediafiles in DAMS"
    },
    {
      "name": "importer",
      "description": "Importer module in DAMS"
    }
  ],
  "paths": {
    "/tenants": {
      "post": {
        "tags": [
          "tenant"
        ],
        "summary": "Add a new tenant",
        "operationId": "addTenant",
        "requestBody": {
          "description": "Tenant object that needs to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/tenant"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/tenant"
                }
              }
            }
          },
          "400": {
            "description": "Tenant doesn't have a valid format"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/tenants/{tenantId}": {
      "put": {
        "tags": [
          "tenant"
        ],
        "summary": "Update an existing tenant",
        "operationId": "updateTenant",
        "parameters": [
          {
            "name": "tenantId",
            "in": "path",
            "description": "Tenant id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Tenant object that needs to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/tenant"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/tenant"
                }
              }
            }
          },
          "400": {
            "description": "Tenant doesn't have a valid format"
          },
          "404": {
            "description": "Tenant not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "patch": {
        "tags": [
          "tenant"
        ],
        "summary": "Patch an existing tenant",
        "operationId": "patchTenant",
        "parameters": [
          {
            "name": "tenantId",
            "in": "path",
            "description": "Tenant id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Tenant object that needs to be patched",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/tenant"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/tenant"
                }
              }
            }
          },
          "400": {
            "description": "Tenant doesn't have a valid format"
          },
          "404": {
            "description": "Tenant not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "tenant"
        ],
        "summary": "Get specific tenant",
        "description": "Get tenant for a specific ID",
        "operationId": "getTenantId",
        "parameters": [
          {
            "name": "tenantId",
            "in": "path",
            "description": "Tenant id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/tenant"
                }
              }
            }
          },
          "404": {
            "description": "Tenant not found"
          }
        }
      },
      "delete": {
        "tags": [
          "tenant"
        ],
        "summary": "Delete specific tenant",
        "description": "Delete tenant with a specific ID",
        "operationId": "deleteTenantId",
        "parameters": [
          {
            "name": "tenantId",
            "in": "path",
            "description": "Tenant id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "successful operation"
          },
          "404": {
            "description": "Tenant not found"
          }
        }
      }
    },
    "/entities": {
      "post": {
        "tags": [
          "entity"
        ],
        "summary": "Add a new entity",
        "operationId": "addEntity",
        "requestBody": {
          "description": "Entity object that needs to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/entity"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/entity"
                }
              }
            }
          },
          "400": {
            "description": "Entity doesn't have a valid format"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get entity list",
        "description": "Get all entities",
        "operationId": "getEntities",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "description": "Skip number of entities",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit number of entities",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "ids",
            "in": "query",
            "description": "List of id's to include in the list",
            "required": false,
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/entity"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/entities/{entityId}": {
      "put": {
        "tags": [
          "entity"
        ],
        "summary": "Update an existing entity",
        "operationId": "updateEntity",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Entity object that needs to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/entity"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/entity"
                }
              }
            }
          },
          "400": {
            "description": "Entity doesn't have a valid format"
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "patch": {
        "tags": [
          "entity"
        ],
        "summary": "Patch an existing entity",
        "operationId": "patchEntity",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Entity object that needs to be patched",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/entity"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/entity"
                }
              }
            }
          },
          "400": {
            "description": "Entity doesn't have a valid format"
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get specific entity",
        "description": "Get entity for a specific ID",
        "operationId": "getEntityId",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/entity"
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      },
      "delete": {
        "tags": [
          "entity"
        ],
        "summary": "Delete specific entity",
        "description": "Delete entity with a specific ID",
        "operationId": "deleteEntityId",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "successful operation"
          },
          "404": {
            "description": "Entity not found"
          }
        }
      }
    },
    "/entities/{entityId}/metadata": {
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get specific entity metadata",
        "description": "Get entity metadata for a specific ID",
        "operationId": "getEntityIdMetadata",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/metadata"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      },
      "post": {
        "tags": [
          "entity"
        ],
        "summary": "Add entity metadata",
        "description": "Add entity metadata for a specific ID",
        "operationId": "addEntityIdMetadata",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Metadata objects that need to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/metadata"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/metadata"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "put": {
        "tags": [
          "entity"
        ],
        "summary": "Update entity metadata",
        "description": "Update entity metadata for a specific ID",
        "operationId": "updateEntityIdMetadata",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Metadata objects that need to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/metadata"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/metadata"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/entities/{entityId}/metadata/{key}": {
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get specific entity metadata fields",
        "description": "Get entity metadata for a specific entity ID",
        "operationId": "getEntityIdMetadataField",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "key",
            "in": "path",
            "description": "Metadata key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/metadata"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      },
      "delete": {
        "tags": [
          "entity"
        ],
        "summary": "Delete specific entity metadata fields",
        "description": "Delete entity metadata fields for a specific ID",
        "operationId": "deleteEntityIdMetadata",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "key",
            "in": "path",
            "description": "Metadata key",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "successful operation"
          },
          "404": {
            "description": "Entity not found"
          }
        }
      }
    },
    "/entities/{entityId}/mediafiles": {
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get specific asset mediafiles",
        "description": "Get entity mediafiles for a specific ID",
        "operationId": "getEntityIdMediafiles",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/mediafile"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      },
      "post": {
        "tags": [
          "entity"
        ],
        "summary": "Add asset mediafile",
        "description": "Add entity mediafile for a specific ID",
        "operationId": "addEntityIdMediafile",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mediafile"
                }
              }
            }
          },
          "400": {
            "description": "Mediafile doesn't have a valid format"
          },
          "404": {
            "description": "Entity not found"
          }
        }
      }
    },
    "/entities/{entityId}/mediafiles/create": {
      "post": {
        "tags": [
          "entity"
        ],
        "summary": "Create asset mediafile",
        "description": "Create entity mediafile for a specific ID",
        "operationId": "createEntityIdMediafile",
        "requestBody": {
          "description": "Filename of mediafile to be uploaded",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/uploadFile"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "format": "uri"
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      }
    },
    "/entities/{entityId}/relations": {
      "get": {
        "tags": [
          "entity"
        ],
        "summary": "Get specific entity relations",
        "description": "Get entity relations for a specific ID",
        "operationId": "getEntityIdRelations",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/relation"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          }
        }
      },
      "post": {
        "tags": [
          "entity"
        ],
        "summary": "Add entity metadata",
        "description": "Add entity relations for a specific ID",
        "operationId": "addEntityIdRelations",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "relation objects that need to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/relation"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/relation"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "put": {
        "tags": [
          "entity"
        ],
        "summary": "Update entity relations",
        "description": "Update entity relations for a specific ID",
        "operationId": "updateEntityIdRelations",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Relation objects that need to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/relation"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/relation"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "patch": {
        "tags": [
          "entity"
        ],
        "summary": "Patch entity relations",
        "description": "Patch entity relations for a specific ID",
        "operationId": "patchEntityIdRelations",
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "Entity id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Relation objects that need to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/relation"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/relation"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Entity not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      }
    },
    "/mediafiles": {
      "post": {
        "tags": [
          "mediafile"
        ],
        "summary": "Add a new mediafile",
        "operationId": "addMediafile",
        "requestBody": {
          "description": "Mediafile object that needs to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/mediafile"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mediafile"
                }
              }
            }
          },
          "400": {
            "description": "Mediafile doesn't have a valid format"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "mediafile"
        ],
        "summary": "Get mediafile list",
        "description": "Get all mediafiles",
        "operationId": "getMediafiles",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "description": "Skip number of entities",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit number of entities",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/mediafile"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/mediafiles/{mediafileId}": {
      "put": {
        "tags": [
          "mediafile"
        ],
        "summary": "Update an existing mediafile",
        "description": "Update mediafile with a specific ID",
        "operationId": "updateMediafile",
        "parameters": [
          {
            "name": "mediafileId",
            "in": "path",
            "description": "Mediafile id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Mediafile object that needs to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/mediafile"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mediafile"
                }
              }
            }
          },
          "400": {
            "description": "Mediafile doesn't have a valid format"
          },
          "404": {
            "description": "Mediafile not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "patch": {
        "tags": [
          "mediafile"
        ],
        "summary": "Patch an existing mediafile",
        "description": "Patch mediafile with a specific ID",
        "operationId": "patchMediafile",
        "parameters": [
          {
            "name": "mediafileId",
            "in": "path",
            "description": "Mediafile id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Mediafile object that needs to be patched",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/mediafile"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mediafile"
                }
              }
            }
          },
          "400": {
            "description": "Mediafile doesn't have a valid format"
          },
          "404": {
            "description": "Mediafile not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "mediafile"
        ],
        "summary": "Get specific mediafile",
        "description": "Get mediafile with a specific ID",
        "operationId": "getMediafileId",
        "parameters": [
          {
            "name": "mediafileId",
            "in": "path",
            "description": "Mediafile id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/mediafile"
                }
              }
            }
          },
          "404": {
            "description": "Mediafile not found"
          }
        }
      },
      "delete": {
        "tags": [
          "mediafile"
        ],
        "summary": "Delete specific mediafile",
        "description": "Delete mediafile with a specific ID",
        "operationId": "deleteMediafileId",
        "parameters": [
          {
            "name": "mediafileId",
            "in": "path",
            "description": "Mediafile id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "successful operation"
          },
          "404": {
            "description": "Mediafile not found"
          }
        }
      }
    },
    "/importer/start": {
      "post": {
        "tags": [
          "importer"
        ],
        "summary": "Start import job",
        "operationId": "startImport",
        "requestBody": {
          "description": "Folder in source location to import from",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "upload_folder": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/message"
                }
              }
            }
          }
        }
      }
    },
    "/importer/directories": {
      "get": {
        "tags": [
          "importer"
        ],
        "summary": "List of possible directories in source location to import from",
        "operationId": "importDirectoryList",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/jobs": {
      "post": {
        "tags": [
          "job"
        ],
        "summary": "Add a new job",
        "operationId": "addJob",
        "requestBody": {
          "description": "Job object that needs to be added",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/job"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/job"
                }
              }
            }
          },
          "400": {
            "description": "Job doesn't have a valid format"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "job"
        ],
        "summary": "Get job list",
        "description": "Get all parent jobs",
        "operationId": "getJobs",
        "parameters": [
           {
            "name": "type",
            "in": "query",
            "description": "Filter by type of job",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "description": "Skip number of jobs",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit number of jobs",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "ids",
            "in": "query",
            "description": "List of id's to include in the list",
            "required": false,
            "explode": false,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/job"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/jobs/{jobId}": {
      "put": {
        "tags": [
          "job"
        ],
        "summary": "Update an existing job",
        "operationId": "updateJob",
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "description": "Job id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Job object that needs to be updated",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/job"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/job"
                }
              }
            }
          },
          "400": {
            "description": "Job doesn't have a valid format"
          },
          "404": {
            "description": "Job not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "patch": {
        "tags": [
          "job"
        ],
        "summary": "Patch an existing job",
        "operationId": "patchJob",
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "description": "Job id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Job object that needs to be patched",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/job"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/job"
                }
              }
            }
          },
          "400": {
            "description": "Job doesn't have a valid format"
          },
          "404": {
            "description": "Job not found"
          },
          "405": {
            "description": "Invalid input"
          }
        }
      },
      "get": {
        "tags": [
          "job"
        ],
        "summary": "Get specific job",
        "description": "Get job for a specific ID",
        "operationId": "getJobId",
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "description": "Job id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/job"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          }
        }
      },
      "delete": {
        "tags": [
          "job"
        ],
        "summary": "Delete specific job",
        "description": "Delete job with a specific ID",
        "operationId": "deleteJobId",
        "parameters": [
          {
            "name": "jobId",
            "in": "path",
            "description": "Job id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "successful operation"
          },
          "404": {
            "description": "Job not found"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "job": {
      "type": "object",
      "default": {},
      "required": ["job_type", "job_info", "status", "start_time"],
      "properties": {
          "job_type": {
              "type": "string"
          },
          "job_info": {
              "type": "string"
          },
          "start_time": {
              "type": "string"
          },
          "user": {
              "type": "string"
          },
          "asset": {
              "type": "string"
          },
          "mediafile_id": {
              "type": "string"
          },
          "parent_job_id": {
              "type": "string"
          },
          "status": {
              "type": "string"
          },
          "sub_jobs": {
              "type": "array",
              "items":{
                "$ref": "#/components/schemas/job"

              }
          }
      }
  },
      "tenant": {
        "type": "object",
        "description": "Tenant object",
        "properties": {
          "metadata": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/metadata"
            }
          },
          "location": {
            "$ref": "#/components/schemas/Location"
          }
        }
      },
      "entity": {
        "type": "object",
        "description": "Entity object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "type": {
            "type": "string"
          },
          "identifiers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/metadata"
            }
          },
          "data": {
            "type": "object",
            "description": "Original entity data"
          }
        }
      },
      "mediafile": {
        "type": "object",
        "description": "Mediafile object",
        "properties": {
          "location": {
            "type": "string",
            "format": "uri"
          },
          "entities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "metadata": {
        "type": "object",
        "description": "Metadata object",
        "properties": {
          "key": {
            "type": "string",
            "description": "metadata label"
          },
          "value": {
            "type": "string",
            "description": "metadata value"
          },
          "language": {
            "type": "string",
            "description": "language of the metadata"
          }
        }
      },
      "relation": {
        "type": "object",
        "description": "Metadata object",
        "properties": {
          "key": {
            "type": "string",
            "format": "uuid",
            "description": "entityid of entity that is the endpoint of the relation"
          },
          "type": {
            "type": "string",
            "description": "relation type"
          }
        }
      },
      "message": {
        "type": "object",
        "description": "RabbitMQ message",
        "properties": {
          "message_id": {
            "type": "string",
            "format": "uuid"
          },
          "data": {
            "type": "object",
            "properties": {
              "upload_source": {
                "type": "string",
                "description": "source location to import from"
              },
              "upload_folder": {
                "type": "string",
                "description": "folder in source location to import from"
              },
              "collection_api_url": {
                "type": "string",
                "format": "uri",
                "description": "url of running collection-api instance"
              },
              "storage_api_url": {
                "type": "string",
                "format": "uri",
                "description": "url of running storage-api instance"
              }
            }
          }
        }
      },
      "Geometry": {
        "type": "object",
        "description": "GeoJSon geometry",
        "required": [
          "type"
        ],
        "externalDocs": {
          "url": "http://geojson.org/geojson-spec.html#geometry-objects"
        },
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Point"
            ],
            "description": "the geometry type"
          }
        }
      },
      "Location": {
        "type": "object",
        "description": "GeoJSon geometry",
        "externalDocs": {
          "url": "http://geojson.org/geojson-spec.html#id2"
        },
        "allOf": [
          {
            "$ref": "#/components/schemas/Geometry"
          },
          {
            "properties": {
              "coordinates": {
                "type": "array",
                "items": {
                  "type": "number",
                  "format": "float"
                }
              }
            }
          }
        ]
      },
      "uploadFile": {
        "type": "object",
        "description": "Upload file object",
        "properties": {
          "filename": {
            "type": "string"
          },
          "metadata": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/metadata"
            }
          }
        }
      }
    }
  }
}
